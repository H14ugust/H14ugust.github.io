<!DOCTYPE html>
<html class="has-navbar-fixed-top">
<head>
    <meta charset="utf-8">
<title>进程和线程、并行和并发、单核和多核CPU - H14ugust&#39;s Blog</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.css">






<link rel="icon" href="/favicon.png">


<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ovo|Source+Code+Pro">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/css/justifiedGallery.min.css">


<link rel="stylesheet" href="/css/style.css">
<script defer src="//use.fontawesome.com/releases/v5.0.8/js/all.js"></script>

</head>
<body>
    
<nav class="navbar is-transparent is-fixed-top navbar-main" role="navigation" aria-label="main navigation">
    <div class="container">
        <div class="navbar-brand">
            <a class="navbar-item navbar-logo" href="/">
                
                <img src="/images/logo.png" alt="" height="28">
                
            </a>
            <div class="navbar-burger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        
        <div class="navbar-menu navbar-start">
            
            <a class="navbar-item "
               href="/archives">Archives</a>
            
            <a class="navbar-item "
               href="/categories/LifeStyle">Lifestyle</a>
            
            <a class="navbar-item "
               href="/categories/Music">Music</a>
            
            <a class="navbar-item "
               href="/categories/Technology">Technology</a>
            
            <a class="navbar-item "
               href="/about">About</a>
            
        </div>
        
        <div class="navbar-menu navbar-end">
            
            <a class="navbar-item search" href="javascript:;">
                <i class="fas fa-search"></i>
            </a>
            
            
            
            <a class="navbar-item" href="https://github.com/ppoffice/hexo-theme-minos">
                
                <i class="fab fa-github"></i>
                
            </a>
               
            
        </div>
    </div>
</nav>

    <section class="section">
    <div class="container">
    <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            进程和线程、并行和并发、单核和多核CPU
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2018-10-13T13:05:34.000Z" itemprop="datePublished">an hour ago</time>
        </span>
        
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <img src="/2018/10/13/进程和线程、并行和并发、单核和多核CPU/forest.jpg">
<h2 id="一-进程"><a href="#一-进程" class="headerlink" title="一.进程"></a>一.进程</h2><ul>
<li><p>进程和线程都是<strong>操作系统</strong>的概念。</p>
</li>
<li><p><strong>进程</strong>是操作系统对正在运行的程序的一种抽象。<strong>进程是应用程序的执行实例，每个进程是由私有的虚拟地址空间、代码、数据和其它各种系统资源组成，</strong>即<strong>进程是操作系统进行资源分配的最小单元</strong>。一个系统上可以同时运行多个进程，在大多数系统中，需要运行的进程数是允许<strong>多于</strong>可以运行它们的CPU数的。</p>
</li>
<li><p><strong>并发</strong>是指一个进程的指令和另一个进程的指令是<strong>交错执行</strong>的。操作系统实现这种交错执行的机制成为<strong>上下文切换</strong>。所谓<strong>上下文</strong>，是指操作系统保持跟踪进程运行所需的<strong>所有状态信息</strong>，例如PC、寄存器文件的当前值、主存内容等。</p>
</li>
<li><p>任一时刻，单处理器系统都只能执行一个进程的代码。当操作系统决定要把控制权从当前进程转换到某个新进程，就会执行<strong>上下文切换</strong>，即保存当前上下文，恢复新进程的上下文，然后将控制权转交给新进程。</p>
</li>
</ul>
<h2 id="二-线程"><a href="#二-线程" class="headerlink" title="二.线程"></a>二.线程</h2><ul>
<li><p>一个进程可由多个称为<strong>线程</strong>的执行单元组成，每个线程都运行在同一进程的上下文中，共享同样的代码和全局数据。<strong>每一个进程至少有一个主执行线程</strong>，它<strong>无需由用户去主动创建</strong>，<strong>是由系统自动创建的</strong>。<strong>用户根据需要</strong>在应用程序中<strong>创建其它线程</strong>，<strong>多个线程并发地运行于同一个进程中</strong>。一个进程中的所有线程都在该进程的虚拟地址空间中，共同使用这些虚拟地址空间、全局变量和系统资源。</p>
</li>
<li><p><strong>线程是CPU调度和分配的基本单元</strong>。线程数是一种逻辑的概念，简单地说，就是<strong>模拟出的CPU核心数</strong>。</p>
</li>
<li><p>系统创建好进程后，实际上就启动执行了该进程的<strong>执行主线程</strong>，主执行线程以函数地址形式，即程序<strong>入口函数</strong>比如说main或WinMain函数，将程序的启动点提供给Windows系统。主执行线程终止了，进程也就随之终止。</p>
</li>
<li><p>多线程较之多进程更易共享数据，线程一般来说比进程更高效。在如网络服务器等对并行处理有较高需求的场景，线程是更好的选择。多线程在多处理器系统中是使程序更有效率的手段。系统效率而非运行效率。</p>
</li>
</ul>
<h2 id="三-并发和并行"><a href="#三-并发和并行" class="headerlink" title="三.并发和并行"></a>三.并发和并行</h2><ul>
<li><p><strong>并发</strong> <em>concurrency</em> 是一个通用的概念，指一个同时具有多个活动的系统。</p>
</li>
<li><p><strong>并行</strong> <em>parallelism</em> 指的是用并发使一个系统运行的更快。</p>
</li>
<li>并发：在同一时刻只能有一条指令执行，但多个进程指令被快速轮换执行，使得在宏观上具有多个进程同时执行的效果。</li>
<li>并行：在同一时刻，有多条指令在多个处理器上同时执行。</li>
</ul>
<h2 id="四-CPU和核心"><a href="#四-CPU和核心" class="headerlink" title="四.CPU和核心"></a>四.CPU和核心</h2><h3 id="1-物理核"><a href="#1-物理核" class="headerlink" title="1.物理核"></a>1.物理核</h3><ul>
<li>物理核心数量=CPU数(机器实装的CPU数)*每个CPU的核心数</li>
</ul>
<h3 id="2-虚拟核"><a href="#2-虚拟核" class="headerlink" title="2.虚拟核"></a>2.虚拟核</h3><ul>
<li>所谓的4核8线程，4核指的是物理核心，通过<strong>超线程</strong>技术，用一个物理核模拟两个虚拟核，每个核两个线程，总数为8线程。</li>
<li>在操作系统看来是8个核，但实际上是4个核。</li>
<li>超线程技术可以实现单个物理核的线程级并行运算。但性能不及两个物理核。</li>
<li>超线程，有时称为同时多线程，是一项允许一个CPU执行多个控制流的技术。涉及CPU的某些硬件具有多个备份，比如程序计数器和寄存器文件，而其他的硬件部分只有一份，比如执行浮点算术运算的单元。超线程通过共享单处理器的一部分原件，实现比如一个进程（线程）必须等到某些数据被装载到高速缓存中，那CPU就可以继续去执行另一个进程（线程）。</li>
</ul>
<h3 id="3-单核CPU和多核CPU"><a href="#3-单核CPU和多核CPU" class="headerlink" title="3.单核CPU和多核CPU"></a>3.单核CPU和多核CPU</h3><ul>
<li>都是一个CPU，不同的是每个CPU上的核心数。</li>
<li>多核CPU是多个CPU的替代方案，同时也减少了功耗。</li>
<li><strong>一个核心只能同时执行一个线程</strong>。</li>
<li>多核是指一个CPU有多个核心处理器，处理器之间通过<strong>CPU内部总线</strong>进行通讯。而多CPU是指简单的多个CPU工作在同一个系统上，<strong>多个CPU之间的通讯是通过主板上的总线进行</strong>的。</li>
<li>单核CPU上运行的多线程程序, 同一时间只能一个线程在跑, 系统帮你切换线程而已, 系统给每个线程分配时间片来执行, 每个时间片大概10ms左右, 看起来像是同时跑, 但实际上是每个线程跑一点点就换到其它线程继续跑，效率不会有提高，切换线程反倒会增加开销。</li>
</ul>
<h3 id="4-多线程"><a href="#4-多线程" class="headerlink" title="4.多线程"></a>4.多线程</h3><ul>
<li><p>多核CPU——计算密集型任务。此时要尽量使用多线程，可以提高任务执行效率，例如加密解密，数据压缩解压缩（视频、音频、普通数据），否则只能使一个核心满载，而其他核心闲置.</p>
</li>
<li><p>单核CPU——计算密集型任务。此时的任务已经把CPU资源100%消耗了，就没必要也不可能使用多线程来提高计算效率了；相反，如果要做人机交互，最好还是要用多线程，避免用户没法对计算机进行操作。</p>
</li>
<li><p>单核CPU——IO密集型任务，使用多线程还是为了人机交互方便.</p>
</li>
<li><p>多核CPU——IO密集型任务，这就更不用说了，跟单核时候原因一样。</p>
</li>
</ul>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><blockquote>
<p>[1].《深入理解计算机系统(原书第2版)》</p>
<p>[2].<a href="http://www.cnblogs.com/-new/p/7234332.html" target="_blank" rel="noopener">http://www.cnblogs.com/-new/p/7234332.html</a></p>
<p>[3].<a href="https://www.jianshu.com/p/0917b5109ecf" target="_blank" rel="noopener">https://www.jianshu.com/p/0917b5109ecf</a></p>
<p>[4].<a href="https://www.cnblogs.com/caihuafeng/p/5438753.html" target="_blank" rel="noopener">https://www.cnblogs.com/caihuafeng/p/5438753.html</a></p>
</blockquote>
<h3 id="图片出处"><a href="#图片出处" class="headerlink" title="图片出处"></a>图片出处</h3><blockquote>
<p><a href="https://unsplash.com/photos/x2k9A5I8hjY" target="_blank" rel="noopener">https://unsplash.com/photos/x2k9A5I8hjY</a></p>
</blockquote>

    
    </div>
    
    <div class="columns is-variable is-1 is-multiline is-mobile">
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/csapp/">#csapp</a></span>
    
    </div>
    
    
    <div class="columns is-mobile is-multiline article-nav">
        <span class="column is-12-mobile is-half-desktop is-hidden-mobile article-nav-prev">
            
        </span>
        <span class="column is-12-mobile is-half-desktop  article-nav-next">
            
            <a href="/2018/10/03/标签插件测试/">标签插件测试</a>
            
        </span>
    </div>
    
</article>




    </div>
</section>
    <footer class="footer">
    <div class="container">
        <div class="columns content">
            <div class="column is-narrow has-text-centered">
                &copy; 2018 H14ugust&nbsp;
                Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a
                        href="http://github.com/ppoffice/hexo-theme-minos">Minos</a>
            </div>
            <div class="column is-hidden-mobile"></div>

            
            <div class="column is-narrow">
                <div class="columns is-mobile is-multiline is-centered">
                
                    
                <a class="column is-narrow has-text-black" href="https://github.com/ppoffice/hexo-theme-minos">
                    
                    GitHub
                    
                </a>
                
                </div>
            </div>
            
            
        </div>
    </div>
</footer>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<!-- test if the browser is outdated -->
<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.js"></script>
<script>
    $(document).ready(function () {
        //plugin function, place inside DOM ready function
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        })
    });
</script>

<script>
    window.FontAwesomeConfig = {
        searchPseudoElements: true
    }
</script>


    
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script>
    MathJax.Hub.Config({
        "HTML-CSS": {matchFontHeight: false},
        SVG: {matchFontHeight: false},
        CommonHTML: {matchFontHeight: false}
    });
</script>

    
    
<script src="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/js/lightgallery-all.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/js/jquery.justifiedGallery.min.js"></script>
<script>
    (function ($) {
        $(document).ready(function () {
            if (typeof($.fn.lightGallery) === 'function') {
                $('.article.gallery').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof($.fn.justifiedGallery) === 'function') {
                $('.justified-gallery').justifiedGallery();
            }
        });
    })(jQuery);
</script>

    
    

    


<script src="/js/script.js"></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-mask"></div>
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="Type something..." />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'Posts',
                PAGES: 'Pages',
                CATEGORIES: 'Categories',
                TAGS: 'Tags',
                UNTITLED: '(Untitled)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js"></script>
    
</body>
</html>